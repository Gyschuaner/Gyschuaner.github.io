<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>修仙日记 - 任务与境界记录</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* 经验暴击效果 */
        .experience-critical-effect {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-size: 3rem;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 10px #ffd700, 0 0 20px #ffd700, 0 0 30px #ffd700;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .experience-critical-effect.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            animation: criticalPulse 1.5s ease-out;
        }
        
        @keyframes criticalPulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 0.9;
            }
            100% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>修仙日记</h1>
            <div class="cultivation-info">
                <div class="realm-info">
                    <span class="realm-label">当前境界:</span>
                    <span id="current-realm" class="realm-value">练气期第一层</span>
                </div>
                <div class="level-info">
                    <span class="level-label">总等级:</span>
                    <span id="total-level" class="level-value">1</span>
                </div>
                <div class="exp-info">
                    <span class="exp-label">总经验值:</span>
                    <span id="total-exp" class="exp-value">0</span>
                </div>
                <div class="next-level-info">
                    <span id="next-level-text" class="next-level-text">距离练气期第二层还需: 100 经验</span>
                </div>
                <div class="exp-bar-container">
                    <div class="exp-bar">
                        <div id="exp-progress" class="exp-progress"></div>
                        <span id="exp-text" class="exp-text">0/100</span>
                    </div>
                    <span id="exp-percentage" class="exp-percentage">0%</span>
                </div>
                <div class="data-storage-info">
                    <small>数据存储于浏览器本地存储 (localStorage)</small>
                    <button id="clear-data" class="clear-data-btn">清除历史数据</button>
                </div>
            </div>
        </header>

        <div class="tabs">
            <button class="tab-btn active" data-tab="tasks">修行任务</button>
            <button class="tab-btn" data-tab="events">大事件记录</button>
            <button class="tab-btn" data-tab="skills">技能树</button>
            <button class="tab-btn" data-tab="equipment">装备系统</button>
        </div>

        <div class="tab-content active" id="tasks-content">
            <div class="task-input-section">
                <input type="text" id="task-input" placeholder="添加新任务..." class="task-text-input">
                <div class="task-difficulty-buttons">
                    <label>难度：</label>
                    <div class="difficulty-button-group">
                        <button type="button" class="difficulty-btn easy" data-value="easy">简单</button>
                        <button type="button" class="difficulty-btn normal active" data-value="normal">普通</button>
                        <button type="button" class="difficulty-btn hard" data-value="hard">困难</button>
                    </div>
                </div>
                <button id="add-task" class="add-btn">添加任务</button>
            </div>
            
            <div class="task-types-row">
                <div class="task-type-card">
                    <div class="task-type-header">
                        <input type="radio" name="task-type" value="normal" checked id="task-type-normal" class="task-type-radio">
                        <label for="task-type-normal" class="task-type-label">普通任务</label>
                    </div>
                    <div id="normal-task-section" class="task-details-section">
                        <input type="number" id="task-exp-input" placeholder="设置经验值" min="1" class="task-exp-input">
                    </div>
                </div>
                
                <div class="task-type-card">
                    <div class="task-type-header">
                        <input type="radio" name="task-type" value="timer" id="task-type-timer" class="task-type-radio">
                        <label for="task-type-timer" class="task-type-label">计时任务</label>
                    </div>
                    <div id="timer-task-section" class="task-details-section" style="display: none;">
                        <input type="number" id="task-duration-input" placeholder="时长（分钟）" min="1" class="task-duration-input">
                        <input type="number" id="task-exp-per-minute-input" placeholder="每分钟经验值" min="1" class="task-exp-input">
                    </div>
                </div>
            </div>
            
            <div class="task-filters">
                <button class="filter-btn active" data-filter="all">全部任务</button>
                <button class="filter-btn" data-filter="pending">未完成</button>
                <button class="filter-btn" data-filter="completed">已完成</button>
            </div>
            
            <div id="task-list" class="task-list">
                <!-- 任务列表将通过JavaScript动态添加 -->
            </div>
        </div>

        <div class="tab-content" id="events-content">
            <div class="event-input-section">
                <input type="text" id="event-title-input" placeholder="事件标题..." class="event-title-input">
                <textarea id="event-content-input" placeholder="记录详情..." class="event-content-input"></textarea>
                <button id="add-event" class="add-btn">添加事件</button>
            </div>
            
            <div id="event-list" class="event-list">
                <!-- 事件列表将通过JavaScript动态添加 -->
            </div>
        </div>
        
        <!-- 技能树标签页内容 -->
        <div class="tab-content" id="skills-content">
            <div class="skills-header">
                <h2>技能树</h2>
                <div class="skill-points-display">
                    <span class="skill-points-label">可用技能点:</span>
                    <span id="skill-points" class="skill-points-value">0</span>
                </div>
            </div>
            
            <div class="skills-section">
                <h3>经验分支</h3>
                
                <!-- 经验直觉技能卡片 -->
                <div class="skill-card">
                    <div class="skill-header">
                        <h4>经验直觉</h4>
                        <span class="skill-level">Lv.<span id="exp-intuition-level">0</span></span>
                    </div>
                    
                    <div class="skill-unlock-condition">
                        <span class="unlock-label">解锁条件:</span>
                        <span class="unlock-value">达到筑基期 (301级)</span>
                    </div>
                    
                    <div class="skill-description">
                        <p>修仙者对天地间经验之力的敏锐感知大幅提升，完成任何任务都能获取更多经验。</p>
                    </div>
                    
                    <div class="skill-stats">
                        <div class="skill-stat">
                            <span class="stat-label">经验加成:</span>
                            <span id="exp-intuition-bonus" class="stat-value">0%</span>
                        </div>
                        <div class="skill-stat">
                            <span class="stat-label">升级消耗:</span>
                            <span id="exp-intuition-cost" class="stat-value">1</span> 技能点
                        </div>
                    </div>
                    
                    <button id="upgrade-exp-intuition" class="upgrade-btn">升级技能</button>
                    
                    <div class="skill-note">
                        <small>提示: 每级额外提升3%经验加成，升级消耗前5级递增，之后固定为5点</small>
                    </div>
                </div>
                
                <!-- 经验增幅技能卡片 -->
                <div class="skill-card">
                    <div class="skill-header">
                        <h4>经验增幅</h4>
                        <span class="skill-level">Lv.<span id="exp-boost-level">0</span></span>
                    </div>
                    
                    <div class="skill-unlock-condition">
                        <span class="unlock-label">解锁条件:</span>
                        <span id="exp-boost-unlock-info" class="unlock-value">经验直觉至少5级 达到筑基期</span>
                    </div>
                    
                    <div class="skill-description">
                        <p>运气也是实力的一部分，有时完成任务会触发意想不到的经验爆发。</p>
                    </div>
                    
                    <div class="skill-stats">
                        <div class="skill-stat">
                            <span class="stat-label">暴击概率:</span>
                            <span id="exp-boost-probability" class="stat-value">0%</span>
                        </div>
                        <div class="skill-stat">
                            <span class="stat-label">升级消耗:</span>
                            <span id="exp-boost-cost" class="stat-value">1</span> 技能点
                        </div>
                    </div>
                    
                    <button id="upgrade-exp-boost" class="upgrade-btn" disabled>升级技能</button>
                    
                    <div class="skill-note">
                        <small>提示: 每级增加经验暴击概率，有机会获得翻倍经验值</small>
                    </div>
                </div>
                
                <!-- 任务专精技能卡片 -->
                <div class="skill-card">
                    <div class="skill-header">
                        <h4>任务专精</h4>
                        <span class="skill-level">Lv.<span id="task-spec-level">0</span></span>
                    </div>
                    
                    <div class="skill-unlock-condition">
                        <span class="unlock-label">解锁条件:</span>
                        <span id="task-spec-unlock-info" class="unlock-value">经验直觉至少5级 达到筑基期中阶</span>
                    </div>
                    
                    <div class="skill-description">
                        <p>专于挑战高难度任务，在困境中获得更多成长。</p>
                    </div>
                    
                    <div class="skill-stats">
                        <div class="skill-stat">
                            <span class="stat-label">简单任务加成:</span>
                            <span id="task-spec-easy-bonus" class="stat-value">0%</span>
                        </div>
                        <div class="skill-stat">
                            <span class="stat-label">普通任务加成:</span>
                            <span id="task-spec-normal-bonus" class="stat-value">0%</span>
                        </div>
                        <div class="skill-stat">
                            <span class="stat-label">困难任务加成:</span>
                            <span id="task-spec-hard-bonus" class="stat-value">0%</span>
                        </div>
                        <div class="skill-stat">
                            <span class="stat-label">升级消耗:</span>
                            <span id="task-spec-cost" class="stat-value">3</span> 技能点
                        </div>
                    </div>
                    
                    <button id="upgrade-task-spec" class="upgrade-btn" disabled>升级技能</button>
                    
                    <div class="skill-note">
                        <small>提示: 每级简单/普通/困难任务经验值额外增加1%/2%/3%，初始加成3%/7%/12%</small>
                    </div>
                </div>
            </div>
        </div>

        <div id="level-up-modal" class="modal">
            <div class="modal-content">
                <h2>✨ 境界提升！</h2>
                <p id="level-up-message">恭喜！你已突破至练气期第二层！</p>
                <button id="level-up-close" class="modal-close-btn">继续修行</button>
            </div>
        </div>

        <!-- 装备系统标签页内容 -->
        <div class="tab-content" id="equipment-content">
            <div class="equipment-header">
                <h2>装备系统</h2>
                <div class="equipment-stats">
                    <div class="coin-display">
                        <span class="coin-label">铜币:</span>
                        <span id="coin-count" class="coin-value">0</span>
                    </div>
                </div>
            </div>
            
            <div class="equipment-section">
                <h3>已装备</h3>
                <div class="equipment-slots">
                    <div class="equipment-slot" data-slot="weapon1">
                        <h4>武器1</h4>
                        <div id="weapon1-equipped" class="equipment-item empty">
                            <span class="empty-text">未装备</span>
                        </div>
                    </div>
                    <div class="equipment-slot" data-slot="weapon2">
                        <h4>武器2</h4>
                        <div id="weapon2-equipped" class="equipment-item empty">
                            <span class="empty-text">未装备</span>
                        </div>
                    </div>
                    <div class="equipment-slot" data-slot="face">
                        <h4>面部</h4>
                        <div id="face-equipped" class="equipment-item empty">
                            <span class="empty-text">未装备</span>
                        </div>
                    </div>
                    <div class="equipment-slot" data-slot="top">
                        <h4>上衣</h4>
                        <div id="top-equipped" class="equipment-item empty">
                            <span class="empty-text">未装备</span>
                        </div>
                    </div>
                    <div class="equipment-slot" data-slot="belt">
                        <h4>腰带</h4>
                        <div id="belt-equipped" class="equipment-item empty">
                            <span class="empty-text">未装备</span>
                        </div>
                    </div>
                    <div class="equipment-slot" data-slot="bottom">
                        <h4>下装</h4>
                        <div id="bottom-equipped" class="equipment-item empty">
                            <span class="empty-text">未装备</span>
                        </div>
                    </div>
                    <div class="equipment-slot" data-slot="shoes">
                        <h4>鞋子</h4>
                        <div id="shoes-equipped" class="equipment-item empty">
                            <span class="empty-text">未装备</span>
                        </div>
                    </div>
                    <div class="equipment-slot" data-slot="accessory">
                        <h4>挂饰</h4>
                        <div id="accessory-equipped" class="equipment-item empty">
                            <span class="empty-text">未装备</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="inventory-section">
                <h3>装备背包</h3>
                <div class="inventory-filters">
                    <button class="inventory-filter-btn active" data-filter="all">全部</button>
                    <button class="inventory-filter-btn" data-filter="weapon">武器</button>
                    <button class="inventory-filter-btn" data-filter="armor">防具</button>
                    <button class="inventory-filter-btn" data-filter="accessory">饰品</button>
                </div>
                <div id="equipment-inventory" class="equipment-inventory-list">
                    <!-- 装备背包将通过JavaScript动态添加 -->
                </div>
            </div>
        </div>

        <!-- 装备详情模态框 -->
        <div id="equipment-detail-modal" class="modal">
            <div class="modal-content">
                <h2 id="equipment-detail-title">装备详情</h2>
                <div id="equipment-detail-content">
                    <!-- 装备详情将通过JavaScript动态添加 -->
                </div>
                <div class="modal-footer">
                    <button id="equipment-equip-btn" class="modal-equip-btn">装备</button>
                    <button id="equipment-upgrade-btn" class="modal-upgrade-btn">升级</button>
                    <button id="equipment-delete-btn" class="modal-delete-btn">删除</button>
                    <button id="equipment-detail-close" class="modal-close-btn">关闭</button>
                </div>
            </div>
        </div>

        <!-- 装备升级模态框 -->
        <div id="equipment-upgrade-modal" class="modal">
            <div class="modal-content">
                <h2>装备升级</h2>
                <div id="upgrade-equipment-info">
                    <!-- 升级装备信息将通过JavaScript动态添加 -->
                </div>
                <div class="upgrade-cost">
                    <p>升级消耗:</p>
                    <p id="upgrade-coin-cost">铜币: 0</p>
                    <p id="upgrade-result">升级后等级: 0</p>
                </div>
                <div class="modal-buttons">
                    <button id="confirm-upgrade-btn" class="modal-confirm-btn">确认升级</button>
                    <button id="confirm-upgrade-10-btn" class="modal-confirm-btn">一次性升10级</button>
                    <button id="cancel-upgrade-btn" class="modal-cancel-btn">取消</button>
                </div>
            </div>
        </div>

        <div id="edit-modal" class="modal">
            <div class="modal-content">
                <h2>修改任务</h2>
                <input type="text" id="edit-task-input" placeholder="任务内容..." class="edit-input">
                <input type="number" id="edit-exp-input" placeholder="经验值" min="1" class="edit-input">
                <div class="modal-buttons">
                    <button id="save-edit" class="modal-save-btn">保存</button>
                    <button id="cancel-edit" class="modal-cancel-btn">取消</button>
                </div>
            </div>
        </div>
    </div>

    <div class="realms-info">
        <h3>修仙境界说明</h3>
        <div class="realms-list">
            <p>1. 练气期 - 修仙入门，吸纳天地灵气</p>
            <p>2. 筑基期 - 稳固道基，奠定修仙基础</p>
            <p>3. 金丹期 - 凝结金丹，法力大增</p>
            <p>4. 元婴期 - 元婴出窍，神魂壮大</p>
            <p>5. 化神期 - 神念化形，可分神化物</p>
            <p>6. 炼虚期 - 炼虚化实，虚实相生</p>
            <p>7. 合体期 - 身心合一，法力无边</p>
            <p>8. 大乘期 - 大道将成，只差一步</p>
            <p>9. 渡劫期 - 渡天劫，证道之路</p>
            <p>10. 真仙期 - 飞升仙界，得证仙道</p>
            <p>11. 金仙期 - 金仙不朽，与天同寿</p>
            <p>12. 太乙金仙 - 太乙玄功，超然物外</p>
            <p>13. 大罗金仙 - 大罗道果，至高境界</p>
            <p>14. 准圣 - 准圣之境，近乎圣人</p>
            <p>15. 圣人 - 天道之下，万法不侵</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>